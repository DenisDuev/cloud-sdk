<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs-java docs-version-current docs-doc-page docs-doc-id-features/connectivity/service-bindings" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Connecting To Bound Services | SAP Cloud SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/service-bindings"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs-java-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs-java-current"><meta data-rh="true" property="og:title" content="Connecting To Bound Services | SAP Cloud SDK"><meta data-rh="true" name="description" content="This article explains how the SAP Cloud SDK can be used to connect to services that are bound to the application."><meta data-rh="true" property="og:description" content="This article explains how the SAP Cloud SDK can be used to connect to services that are bound to the application."><meta data-rh="true" name="keywords" content="sap,cloud,sdk,destination,servicebinding,servicebindingdestinationloader,java,connectivity,btp"><link data-rh="true" rel="icon" href="/cloud-sdk/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/service-bindings"><link data-rh="true" rel="alternate" href="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/service-bindings" hreflang="en"><link data-rh="true" rel="alternate" href="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/service-bindings" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://E4A268JVO0-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="SAP Cloud SDK" href="/cloud-sdk/opensearch.xml"><link rel="stylesheet" href="/cloud-sdk/assets/css/styles.11d32c28.css">
<script src="/cloud-sdk/assets/js/runtime~main.ec8e124d.js" defer="defer"></script>
<script src="/cloud-sdk/assets/js/main.273ef770.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_w47h" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-color-primary-contrast-foreground)" role="banner"><div class="content_M4QP announcementBarContent_JsD6">How do you like the SAP Cloud SDK? Share your <a href="https://sapinsights.eu.qualtrics.com/jfe/form/SV_0P69X6kJ0Pdxqbc" style="color: var(--ifm-link-color);text-decoration: var(--ifm-link-decoration);transition: color var(--ifm-transition-fast) var(--ifm-transition-timing-default)">feedback</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cloud-sdk/"><div class="navbar__logo"><img src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cloud-sdk/img/logo-dark.svg" alt="SAP Cloud SDK" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SAP Cloud SDK</b></a><a class="navbar__item navbar__link" href="/cloud-sdk/docs/overview/overview-cloud-sdk">Overview</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" docspluginid="docs-java" href="/cloud-sdk/docs/java/overview-cloud-sdk-for-java">â˜• Java</a><a class="navbar__item navbar__link" docspluginid="docs-js" href="/cloud-sdk/docs/js/overview">ðŸš€ JavaScript</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/cloud-sdk/docs/java/overview-cloud-sdk-for-java">v5</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/cloud-sdk/docs/java/features/connectivity/service-bindings">v5</a></li><li><a class="dropdown__link" href="/cloud-sdk/docs/java/v4/overview-cloud-sdk-for-java">v4</a></li><li><a class="dropdown__link" href="/cloud-sdk/docs/java/v3/overview-cloud-sdk-for-java">v3</a></li></ul></div><div class="navbarSearchContainer_IP3a"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI"><div class="docsWrapper_JGIH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docRoot_eRbX"><aside class="theme-doc-sidebar-container docSidebarContainer_Ta75"><div class="sidebarViewport_fgog"><div class="sidebar_oDHW"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_vPEQ menuWithAnnouncementBar_qugZ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/overview-cloud-sdk-for-java">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/cloud-sdk/docs/java/features/odata/overview">Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/features/odata/overview">OData</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/features/rest/overview">OpenAPI</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/bapi-and-rfc/overview">BAPI/RFC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/destination-service">Connectivity</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/destination-service">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/btp-destination-service">BTP Destination Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/on-premise">On-Premise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/service-bindings">Bound Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/http-destinations">HTTP Destinations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/http-client">HTTP Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/running-locally">Running Locally</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/mtls">Certificate-based Authentication</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/features/multi-tenancy/thread-context">Multitenancy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/features/resilience">Resilience &amp; Caching</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud-sdk/docs/java/environments/overview">Environments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud-sdk/docs/java/guides/5.0-upgrade-steps">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud-sdk/docs/java/video/video-tutorial-about-getting-started-with-sap-cloud-sdk-for-java">Video Tutorials</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/troubleshooting-frequent-problems">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/release-policy">Release Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/support">Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/frequently-asked-questions">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="/cloud-sdk/java-api/v5/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_iv3S">API Reference<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://central.sonatype.com/search?q=g:com.sap.cloud.sdk*&amp;smo=true" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_iv3S">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_lg0V"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cloud-sdk/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JACu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Features</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Connectivity</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Bound Services</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Connecting To Bound Services</h1></header><p><a href="https://github.com/SAP/btp-environment-variable-access/wiki/Fundamentals#service-binding" target="_blank" rel="noopener noreferrer"><em>Service Bindings</em></a> are a fundamental concept of application deployment on the SAP Business Technology Platform.
A <em>Service Binding</em>, in essence, is a set of configurations that applications can use to establish a connection to a (remote) service.
As such, both <em>Service Bindings</em> as well as <a href="/cloud-sdk/docs/java/features/connectivity/destination-service#accessing-destinations"><em>Destination</em></a> resemble the same concept.</p>
<p>The SAP Cloud SDK, therefore, provides a way to convert <a href="https://github.com/SAP/btp-environment-variable-access/blob/main/api-parent/core-api/src/main/java/com/sap/cloud/environment/servicebinding/api/ServiceBinding.java" target="_blank" rel="noopener noreferrer"><code>ServiceBinding</code></a> instances into <code>HttpDestination</code> instances. <br>
The code below, for example, demonstrates how to transform a <code>ServiceBinding</code> for the <a href="https://api.sap.com/api/SAP_CP_Workflow_CF/overview" target="_blank" rel="noopener noreferrer">Workflow REST API</a> into an <code>HttpDestination</code>:</p>
<div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sap</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cloud</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">environment</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">servicebinding</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">api</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ServiceIdentifier</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sap</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cloud</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sdk</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cloudplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">connectivity</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">BtpServiceOptions</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServiceIdentifier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">WORKFLOW</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BtpServiceOptions</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">WorkflowOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">REST_API</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">HttpDestination</span><span class="token plain"> destination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ServiceBindingDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">defaultLoaderChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="out-of-the-box-support">Out Of The Box Support<a href="#out-of-the-box-support" class="hash-link" aria-label="Direct link to Out Of The Box Support" title="Direct link to Out Of The Box Support">â€‹</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_LMjb alert alert--warning"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Prerequisites</div><div class="admonitionContent_pGk6"><p>For the following to work, the application needs to add the <a href="https://central.sonatype.com/artifact/com.sap.cloud.sdk.cloudplatform/connectivity-oauth" target="_blank" rel="noopener noreferrer"><strong><code>connectivity-oauth</code> artifact</strong></a> to its dependencies.</p></div></div>
<p>The SAP Cloud SDK is able to deal with <code>ServiceBinding</code>s for the following BTP services:</p>
<ul>
<li><a href="https://api.sap.com/api/SAP_CP_CF_Connectivity_Destination/overview" target="_blank" rel="noopener noreferrer">The BTP Destination Service on Cloud Foundry</a></li>
<li><a href="https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/what-is-sap-btp-connectivity" target="_blank" rel="noopener noreferrer">The BTP Connectivity Service on Cloud Foundry</a></li>
<li><a href="https://api.sap.com/package/SAPCPWorkflowAPIs/all" target="_blank" rel="noopener noreferrer">The SAP Workflow Service on Cloud Foundry</a>
<ul>
<li><a href="https://api.sap.com/api/SAP_CP_Workflow_TCM_CF/overview" target="_blank" rel="noopener noreferrer">Inbox API (OData)</a></li>
<li><a href="https://api.sap.com/api/SAP_CP_Workflow_CF/overview" target="_blank" rel="noopener noreferrer">Workflow API (REST)</a></li>
</ul>
</li>
<li><a href="https://api.sap.com/package/SAPCPBusinessRulesAPIs/all" target="_blank" rel="noopener noreferrer">The SAP Business Rules Service on Cloud Foundry</a>
<ul>
<li><a href="https://api.sap.com/api/SAP_CF_BusinessRules_Repository/overview" target="_blank" rel="noopener noreferrer">Rule Authoring API</a></li>
<li><a href="https://api.sap.com/api/SAP_CF_BusinessRules_Runtime_V2/overview" target="_blank" rel="noopener noreferrer">Rule Execution API (v2)</a></li>
</ul>
</li>
<li>The <em>SAP Business Logging on Cloud Foundry</em> (SAP internal)<!-- -->
<ul>
<li>Configuration API</li>
<li>Text API</li>
<li>Reading API</li>
<li>Writing API</li>
</ul>
</li>
</ul>
<p>For BTP services that offer different APIs (such as the Workflow service), make sure to define which API the converted <code>HttpDestination</code> should point to using the corresponding <code>BtpServiceOptions</code>. <br>
For example:</p>
<div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">com</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sap</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cloud</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">sdk</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">cloudplatform</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">connectivity</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">BtpServiceOptions</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServiceIdentifier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">WORKFLOW</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BtpServiceOptions</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">WorkflowOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">REST_API</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="multitenancy">Multitenancy<a href="#multitenancy" class="hash-link" aria-label="Direct link to Multitenancy" title="Direct link to Multitenancy">â€‹</a></h3>
<p><code>HttpDestination</code> instances created by the <code>ServiceBindingDestinationLoader</code> API are, by default, <strong>tenant-aware</strong>.
This means that communication with the target system will happen according to the specified <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationOptions.Builder.html#onBehalfOf(com.sap.cloud.sdk.cloudplatform.connectivity.OnBehalfOf)" target="_blank" rel="noopener noreferrer"><code>OnBehalfOf</code></a>.</p>
<p>The default value, <code>OnBehalfOf.TECHNICAL_USER_CURRENT_TENANT</code>, can be overwritten when assembling the <code>ServiceBindingDestinationOptions</code> instance:</p>
<div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServiceIdentifier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">WORKFLOW</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BtpServiceOptions</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">WorkflowOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">REST_API</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onBehalfOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">OnBehalfOf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NAMED_USER_CURRENT_TENANT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="how-it-works">How It Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">â€‹</a></h2>
<p>In general, the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationLoader.html" target="_blank" rel="noopener noreferrer"><code>ServiceBindingDestinationLoader</code> API</a> can be used to convert <code>ServiceBinding</code> instances into <code>HttpDestination</code> instances.
It comes as part of the <a href="https://central.sonatype.com/artifact/com.sap.cloud.sdk.cloudplatform/cloudplatform-connectivity" target="_blank" rel="noopener noreferrer"><code>cloudplatform-connectivity</code> artifact</a>.</p>
<p>The API is designed for easy extensibility and customization.
Hereby, each <code>ServiceBindingDestinationLoader</code> implementation is supposed to provide the transformation logic for one specific &quot;type&quot; of <code>ServiceBinding</code>. <br>
The SAP Cloud SDK provides, for example, <a href="#about-the-oauth2loader">an implementation that is capable of dealing with service bindings that use OAuth2 authentication</a>.</p>
<p>As an input, the API requires <a href="#about-the-options">the <code>ServiceBindingDestinationOptions</code></a> instance.
This class is designed to hold all information that is required to transform a <code>ServiceBinding</code> into an <code>HttpDestination</code> - this, first and foremost, includes the <code>ServiceBinding</code> itself.</p>
<p>Furthermore, there is also a <a href="#about-the-chain-implementation"><em>chain</em> implementation</a> that can be used to combine multiple <code>ServiceBindingDestinationLoader</code> implementations into one.
The chain will try to load a destination using the given <code>ServiceBindingDestinationLoader</code> delegates until the first of them succeeds - much like a fallback mechanism.
This concept is also reflected in the example from above, where the <code>defaultLoaderChain</code> is used to load a destination.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="about-the-options">About the <em>Options</em><a href="#about-the-options" class="hash-link" aria-label="Direct link to about-the-options" title="Direct link to about-the-options">â€‹</a></h2>
<p>The <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationOptions.html" target="_blank" rel="noopener noreferrer"><code>ServiceBindingDestinationOptions</code></a> is an <strong>extensible and type-safe</strong> collection of parameters that can be used to configure the <code>ServiceBinding</code> to <code>HttpDestination</code> transformation process.
Hereby, the least information that is needed is the <code>ServiceBinding</code> itself, which can be provided using the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationOptions.html#forService(com.sap.cloud.environment.servicebinding.api.ServiceBinding)" target="_blank" rel="noopener noreferrer"><code>forService(ServiceBinding)</code></a> method.</p>
<p>Alternatively, you can also use <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationOptions.html#forService(com.sap.cloud.environment.servicebinding.api.ServiceIdentifier)" target="_blank" rel="noopener noreferrer"><code>forService(ServiceIdentifier)</code></a>.
This method will try to find a <code>ServiceBinding</code> for the given <code>ServiceIdentifier</code> using the <a href="https://github.com/SAP/btp-environment-variable-access/blob/main/api-parent/access-api/src/main/java/com/sap/cloud/environment/servicebinding/api/DefaultServiceBindingAccessor.java" target="_blank" rel="noopener noreferrer"><code>DefaultServiceBindingAccessor</code> instance</a>. <br>
<strong>Please note:</strong> If there are multiple or no <code>ServiceBinding</code>s for the given <code>ServiceIdentifier</code>, an exception will be thrown.</p>
<p>Besides the <code>ServiceBinding</code>, there is a second parameter that is shared between all <code>ServiceBindingDestinationLoader</code> implementations: The <code>OnBehalfOf</code>, for which the destination should be loaded.
This can be set using the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationOptions.Builder.html#onBehalfOf(com.sap.cloud.sdk.cloudplatform.connectivity.OnBehalfOf)" target="_blank" rel="noopener noreferrer"><code>onBehalfOf(OnBehalfOf)</code></a> method. <br>
If not explicitly specified, <code>OnBehalfOf.TECHNICAL_USER_CURRENT_TENANT</code> is used.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="custom-parameters">Custom Parameters<a href="#custom-parameters" class="hash-link" aria-label="Direct link to Custom Parameters" title="Direct link to Custom Parameters">â€‹</a></h3>
<p>Adding custom parameters to the <code>ServiceBindingDestinationOptions</code> can be done using the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationOptions.Builder.html#withOption(com.sap.cloud.sdk.cloudplatform.connectivity.ServiceBindingDestinationOptions.OptionsEnhancer)" target="_blank" rel="noopener noreferrer"><code>withOption(OptionsEnhancer)</code></a> method.
Hereby, an <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/ServiceBindingDestinationOptions.OptionsEnhancer.html" target="_blank" rel="noopener noreferrer"><code>OptionsEnhancer</code></a> is a type-safe representation of arbitrary parameters.</p>
<details class="details_lb9f alert alert--info details_jW4y" data-collapsed="true"><summary>Example: Custom Service Binding Transformation</summary><div><div class="collapsibleContent_i85q"><div class="theme-admonition theme-admonition-tip admonition_LMjb alert alert--success"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Advanced Usage</div><div class="admonitionContent_pGk6"><p>The following example demonstrates a very advanced usage of our <code>ServiceBindingDestinationLoader</code> API.</p><p>A vast majority of use cases do not require a custom <code>ServiceBindingDestinationLoader</code> implementation. <br>
Instead, customizing the existing <code>OAuth2ServiceBindingDestinationLoader</code> as <a href="#customization">described below</a> is most probably sufficient.</p></div></div><p>Lets assume we are providing a custom <code>ServiceBindingDestinationLoader</code> implementation that requires some additional information to be able to transform a <code>ServiceBinding</code> into an <code>HttpDestination</code>.</p><p>In this example, we assume that there are two different APIs for our service.
Depending on which API we want to create our <code>HttpDestination</code> for, we need to slightly alter the transformation logic.
Additionally, we want to be able to supply an additional <code>String</code> parameter that also affects the created <code>HttpDestination</code>.</p><p>To achieve this behavior, we would need to implement two <code>OptionsEnhancer</code>s like so:</p><div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_RqKv">MyApiChoice.java</div><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ codeBlockLinesWithNumbering_xeGh"><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">MyApiChoice</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">OptionsEnhancer</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">MyApiChoice</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">API1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">API2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">MyApiChoice</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_RqKv">MyStringParameter.java</div><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ codeBlockLinesWithNumbering_xeGh"><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyStringParameter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">OptionsEnhancer</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">MyStringParameter</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyStringParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">MyStringParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first implementation uses an <code>enum</code> to implement a <strong>fixed set of choices</strong> option.
It is noteworthy that the actual parameter type is the <code>MyApiChoice</code> enum itself.
That way, we will be able to retrieve the set value later on.</p><p>In contrast to that, the second implementation provides a <code>String</code> parameter.</p><p>Setting the options can then be done like so:</p><div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token class-name">ServiceBinding</span><span class="token plain"> someServiceBinding</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">someServiceBinding</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyApiChoice</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">API1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyStringParameter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;some-value&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, we can implement our custom <code>ServiceBindingDestinationLoader</code> that uses our new options like so:</p><div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_RqKv">MyCustomServiceBindingLoader.java</div><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ codeBlockLinesWithNumbering_xeGh"><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyCustomServiceBindingLoader</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">ServiceBindingDestinationLoader</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Try</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">HttpDestination</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tryGetDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"> </span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"> options </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token class-name">Option</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">MyApiChoice</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> maybeOption </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyApiChoice</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> maybeOption</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Try</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">failure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DestinationNotFoundException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;No API choice was specified.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token class-name">Option</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> maybeStringValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyStringParameter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token class-name">MyApiChoice</span><span class="token plain"> option </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> maybeOption</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">switch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> option </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// do something</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// do something else</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="about-the-oauth2loader">About the <em>OAuth2Loader</em><a href="#about-the-oauth2loader" class="hash-link" aria-label="Direct link to about-the-oauth2loader" title="Direct link to about-the-oauth2loader">â€‹</a></h2>
<p>The <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/OAuth2ServiceBindingDestinationLoader.html" target="_blank" rel="noopener noreferrer"><code>OAuth2ServiceBindingDestinationLoader</code></a> comes as part of the <a href="https://central.sonatype.com/artifact/com.sap.cloud.sdk.cloudplatform/connectivity-oauth" target="_blank" rel="noopener noreferrer"><code>connectivity-oauth</code> artifact</a> and provides a customizable implementation for converting <code>ServiceBinding</code>s that use OAuth2 authentication into <code>HttpDestination</code> instances. <br>
More precisely, it supports the <strong>OAuth2 Client Credentials</strong> and <strong>OAuth2 Client Certificate</strong> grant types.</p>
<p>Internally, the implementation performs the following steps:</p>
<ol>
<li>Check whether the given <code>ServiceBindingDestinationOptions</code> can be transformed (e.g. whether the <code>ServiceBinding</code> uses a supported grant type).</li>
<li>Extract the required information from the <code>ServiceBinding</code> (i.e. the service URL, the token URL, and the client identity).</li>
<li>Assemble an <code>HttpDestination</code> that uses the extracted information for the <strong>target authentication</strong> (i.e. HTTP header <code>Authorization</code>).</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="dealing-with-arbitrary-service-bindings">Dealing With Arbitrary Service Bindings<a href="#dealing-with-arbitrary-service-bindings" class="hash-link" aria-label="Direct link to Dealing With Arbitrary Service Bindings" title="Direct link to Dealing With Arbitrary Service Bindings">â€‹</a></h3>
<p>Even though <strong>service bindings</strong> are a fundamental concept in the SAP Business Technology Platform, the way they are used and structured can <strong>vary greatly from service to service</strong>.
As a consequence, it is not possible to provide a uniform way of dealing with arbitrary <code>ServiceBinding</code>s. <br>
Therefore, the <code>OAuth2ServiceBindingDestinationLoader</code> leverages the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/OAuth2PropertySupplier.html" target="_blank" rel="noopener noreferrer"><code>OAuth2PropertySupplier</code></a> interface to extract the required information from a given <code>ServiceBindingDestinationLoaderOptions</code> instance.</p>
<p>The <code>OAuth2ServiceBindingDestinationLoader</code> stores a <strong>static list</strong> of <code>OAuth2PropertySupplier</code> instances.
Whenever the <code>OAuth2ServiceBindingDestinationLoader</code> is asked to load a destination, it will iterate over this list (<strong>in order</strong>) to see whether</p>
<ol>
<li>the given <code>ServiceBindingDestinationOptions</code> can be transformed into an <code>HttpDestination</code> using the current <code>OAuth2PropertySupplier</code> instance, and, if so</li>
<li>extract the required information from the given <code>ServiceBindingDestinationOptions</code> using the current <code>OAuth2PropertySupplier</code>.</li>
</ol>
<p>By default, there are <code>OAuth2PropertySupplier</code> for the services <a href="#out-of-the-box-support">mentioned above</a> in place.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="customization">Customization<a href="#customization" class="hash-link" aria-label="Direct link to Customization" title="Direct link to Customization">â€‹</a></h3>
<p>In case the default configuration of the <code>OAuth2ServiceBindingDestinationLoader</code> does not fit your needs, you can customize it by adding your own <code>OAuth2PropertySupplier</code> instances to the static list of the <code>OAuth2ServiceBindingDestinationLoader</code>:</p>
<div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token class-name">OAuth2ServiceBindingDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerPropertySupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">canBeConverted</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">propertySupplierFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">canBeConverted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">OAuth2PropertySupplier</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">propertySupplierFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As shown above, the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/OAuth2ServiceBindingDestinationLoader.html#registerPropertySupplier(java.util.function.Predicate,java.util.function.Function)" target="_blank" rel="noopener noreferrer"><code>registerPropertySupplier</code></a> method takes two methods as parameters.
This might be unintuitive, but is needed to allow for efficient implementations.</p>
<p>What is happening internally when this method is used, is that the given parameters are transformed into an internal representation, which is then <strong>prepended</strong> to the list of available <code>OAuth2PropertySupplier</code> instances.
In other words: Using the <code>registerPropertySupplier</code> method will make your <code>OAuth2PropertySupplier</code> instance be considered <strong>before</strong> any previously registered <code>OAuth2PropertySupplier</code> instance, including the default ones.</p>
<details class="details_lb9f alert alert--info details_jW4y" data-collapsed="true"><summary>Full Example</summary><div><div class="collapsibleContent_i85q"><p>To make things a bit more concrete, let&#x27;s assume we wanted to implement support for an other service, which uses its very own <code>ServiceBinding</code> structure.</p><p>Our hypothetical service binding could look like this:</p><div class="language-json codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-json codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ codeBlockLinesWithNumbering_xeGh"><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">{</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">  &quot;service&quot;: &quot;my-service&quot;,</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">  &quot;credentials&quot;: {</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    &quot;service&quot;: {</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">      &quot;read&quot;: &quot;https://my-service.com/api/v1/read&quot;,</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">      &quot;write&quot;: &quot;https://my-service.com/api/v2/write&quot;</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    },</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    &quot;oauth&quot;: {</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">      &quot;uri&quot;: &quot;https://my-service.com/oauth/token&quot;,</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">      &quot;id&quot;: &quot;my-client-id&quot;,</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">      &quot;secret&quot;: &quot;my-client-secret&quot;</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    }</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">  }</span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The service binding above contains two different API endpoints (<code>read</code> and <code>write</code>), which we would like to be able to access using the <code>OAuth2ServiceBindingDestinationLoader</code>.
To support that, we need to implement an <code>OAuth2PropertySupplier</code> (to implement the property extraction logic) and an <code>OptionsEnhancer</code> (to allow users to define which endpoint they would like to use):</p><div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_RqKv">MyApiEndpoint.java</div><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ codeBlockLinesWithNumbering_xeGh"><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">MyApiEndpoint</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">OptionsEnhancer</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">MyApiEndpoint</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">READ</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">WRITE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">MyApiEndpoint</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_RqKv">MyServiceOAuth2PropertySupplier.java</div><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ codeBlockLinesWithNumbering_xeGh"><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyServiceOAuth2PropertySupplier</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">DefaultOAuth2PropertySupplier</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">MyServiceOAuth2PropertySupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Collections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">singletonList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;oauth&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isOAuth2Binding</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getOAuthCredential</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isDefined</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">URI</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getServiceUri</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token class-name">MyApiEndpoint</span><span class="token plain"> endpoint </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyApiEndpoint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOrElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyApiEndpoint</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">READ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">READ</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCredentialOrThrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;service&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;read&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WRITE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCredentialOrThrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;service&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;write&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">URI</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getTokenUri</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getOAuthCredentialOrThrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;uri&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">ClientIdentity</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getClientIdentity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> clientId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getOAuthCredentialOrThrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> clientSecret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getOAuthCredentialOrThrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;secret&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ClientCredentials</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> clientSecret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Lets examine the implementation above:</p><p>Right in the first line, you can see that our implementation extends the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/DefaultOAuth2PropertySupplier.html" target="_blank" rel="noopener noreferrer"><code>DefaultOAuth2PropertySupplier</code></a> class, instead of implementing the <code>OAuth2PropertySupplier</code> interface directly. <br>
This is because the <code>DefaultOAuth2PropertySupplier</code> class provides a lot of useful functionality, which we can reuse in our implementation. <br>
We will see that in a second.</p><p>Next thing we should pay attention to is the constructor of our class. <br>
It takes an instance of <code>ServiceBindingDestinationOptions</code> as a parameter.
This instance is then passed to the <code>super</code> constructor (line 4) along with a list of <code>String</code>s.</p><p>The super class (<code>DefaultOAuth2PropertySupplier</code>) uses these parameters to</p><ol>
<li>cache the <em>credentials</em> portion of the <code>ServiceBinding</code> (given in the <code>ServiceBindingDestinationOptions</code>) as a <a href="https://github.com/SAP/btp-environment-variable-access/blob/main/api-parent/consumption-api/src/main/java/com/sap/cloud/environment/servicebinding/api/TypedMapView.java" target="_blank" rel="noopener noreferrer"><code>TypedMapView</code> instance</a> and</li>
<li>set the <em>default oauth2 properties path</em> <strong>within</strong> the <em>credentials</em> portion of the <code>ServiceBinding</code>.</li>
</ol><p>Converting the <em>credentials</em> portion of the <code>ServiceBinding</code> into a <code>TypedMapView</code> is helpful for parsing the nested structure. <br>
Therefore, it is a good idea to do the conversion (i.e. <code>TypeMapView.ofCredentials(ServiceBinding)</code>) just once as it performs an expensive deep-copy.
Hereby, the <code>DefaultOAuth2PropertySupplier</code> takes care of doing the conversion upon initialization and caching the result for later use.</p><p>Further down in our code (i.e. within the overriden methods), we can then use the <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/DefaultOAuth2PropertySupplier.html#getCredential(java.lang.Class,java.lang.String...)" target="_blank" rel="noopener noreferrer"><code>getCredential/OrThrow</code></a> and <a href="/cloud-sdk/java-api/v5/com/sap/cloud/sdk/cloudplatform/connectivity/DefaultOAuth2PropertySupplier.html#getOAuthCredential(java.lang.Class,java.lang.String...)" target="_blank" rel="noopener noreferrer"><code>getOAuthCredential/OrThrow</code></a> methods to extract the required information from the cached <em>credentials</em>. <br>
The main difference between <code>getCredential</code> and <code>getOAuthCredential</code> is that the latter will <strong>prepend</strong> the <em>default oauth2 properties path</em> to the one given in the method invocation before trying to extract the information. <br>
In our example (line 9), this means that <code>getOAuthCredential(String.class, &quot;id&quot;)</code> will try to extract a <code>String</code> value from <code>credentials.get(&quot;oauth&quot;).get(&quot;id&quot;)</code> (<em>pseudo code</em>). <br>
In contrast to that, using just <code>getCredential(String.class, &quot;id&quot;)</code> would try to extract a <code>String</code> value from <code>credentials.get(&quot;id&quot;)</code> (<em>pseudo code</em>). <br>
<code>getOAuthCredential</code> is therefore just a neat shortcut that can help to reduce repetitive code.</p><p>Please note how we are handling our <code>MyApiEndpoint</code> option in the <code>getServiceUri</code> method (lines 14 - 20). <br>
We are reading the option by simply providing the <code>MyApiEndpoint.class</code> as the parameter to the <code>getOption</code> method.
That way, we can decide which service URI to use, depending on the user input.</p><p>Lastly, we need to register our <code>OAuth2PropertySupplier</code> implementation with the <code>OAuth2ServiceBindingDestinationLoader</code>:</p><div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_RqKv">MyServiceOAuth2PropertySupplier.java</div><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ codeBlockLinesWithNumbering_xeGh"><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyServiceOAuth2PropertySupplier</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">DefaultOAuth2PropertySupplier</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">ServiceIdentifier</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MY_SERVICE_IDENTIFIER</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ServiceIdentifier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my-service&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">matches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ServiceBindingDestinationOptions</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> serviceIdentifier </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getServiceBinding</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getServiceIdentifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">orElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MY_SERVICE_IDENTIFIER</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serviceIdentifier</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// skipped for brevity</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_gn0d" style="color:#393A34"><span class="codeLineNumber_SYni"></span><span class="codeLineContent_hJ_G"><span class="token plain"></span><span class="token class-name">OAuth2ServiceBindingDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerPropertySupplier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyServiceOAuth2PropertySupplier</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">matches</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MyServiceOAuth2PropertySupplier</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, we added a static <code>matches</code> method (lines 4 - 7) to our <code>OAuth2PropertySupplier</code> implementation, which we can use to check whether the given <code>ServiceBindingDestinationOptions</code> can be transformed into an <code>HttpDestination</code> using our implementation.
We are then using method references to register our implementation with the <code>OAuth2ServiceBindingDestinationLoader</code>.</p></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="about-the-chain-implementation">About the Chain Implementation<a href="#about-the-chain-implementation" class="hash-link" aria-label="Direct link to About the Chain Implementation" title="Direct link to About the Chain Implementation">â€‹</a></h2>
<p>As mentioned <a href="#how-it-works">above</a>, the <code>ServiceBindingDestinationLoader</code> comes with a private <em>chain</em> implementation.</p>
<p>The default instance of that chain (<code>ServiceBindingDestinationLoader.defaultLoaderChain</code>) is created using the <em>Service Locator Pattern</em> to find all available <code>ServiceBindingDestinationLoader</code> implementations on the classpath.
Instances of these implementations are then used as delegate loaders.
When transforming a <code>ServiceBindingDestinationOptions</code> into an <code>HttpDestination</code>, the chain will invoke the delegates <strong>in order</strong> until the first one either succeeds or throws an exception other than <code>DestinationNotFoundException</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>The <em>Service Locator Pattern</em> does not provide any guarantees about the order in which implementations on the classpath are found.
Therefore, it is <strong>crucial</strong> that <code>ServiceBindingDestinationLoader</code> implementations do <strong>not handle the same <code>ServiceBindingDestinationOptions</code></strong> as otherwise the default chain&#x27;s behavior would be <strong>unpredictable</strong>.</p><p>Implementations provided by the SAP Cloud SDK follow this rule.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="custom-chain-instances">Custom Chain Instances<a href="#custom-chain-instances" class="hash-link" aria-label="Direct link to Custom Chain Instances" title="Direct link to Custom Chain Instances">â€‹</a></h3>
<p>If the default chain implementation does not meet your needs, you can create your own chain instance:</p>
<div class="language-java codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-java codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token class-name">ServiceBindingDestinationLoader</span><span class="token plain"> myChain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ServiceBindingDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newLoaderChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Arrays</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyFirstLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MySecondLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The code above initializes a new instance of the private chain implementation, which uses the given <code>ServiceBindingDestinationLoader</code> instances <strong>in the specified order</strong> as its delegates.
Therefore, deterministic behavior is guaranteed.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SAP/cloud-sdk/edit/main/docs-java/features/connectivity/003-service-bindings.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_NulP" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated__GQF"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cloud-sdk/docs/java/features/connectivity/on-premise"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">On-Premise</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cloud-sdk/docs/java/features/connectivity/http-destinations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">HTTP Destinations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#out-of-the-box-support" class="table-of-contents__link toc-highlight">Out Of The Box Support</a><ul><li><a href="#multitenancy" class="table-of-contents__link toc-highlight">Multitenancy</a></li></ul></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#about-the-options" class="table-of-contents__link toc-highlight">About the <em>Options</em></a><ul><li><a href="#custom-parameters" class="table-of-contents__link toc-highlight">Custom Parameters</a></li></ul></li><li><a href="#about-the-oauth2loader" class="table-of-contents__link toc-highlight">About the <em>OAuth2Loader</em></a><ul><li><a href="#dealing-with-arbitrary-service-bindings" class="table-of-contents__link toc-highlight">Dealing With Arbitrary Service Bindings</a></li><li><a href="#customization" class="table-of-contents__link toc-highlight">Customization</a></li></ul></li><li><a href="#about-the-chain-implementation" class="table-of-contents__link toc-highlight">About the Chain Implementation</a><ul><li><a href="#custom-chain-instances" class="table-of-contents__link toc-highlight">Custom Chain Instances</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SAP Cloud SDK for Java</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developers.sap.com/tutorial-navigator.html?tag=products:technology-platform/sap-cloud-sdk/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://central.sonatype.com/search?q=g:com.sap.cloud.sdk*&amp;smo=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Maven<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/java/support">Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">SAP Cloud SDK for JavaScript</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/tutorials/getting-started/introduction">Tutorials</a></li><li class="footer__item"><a href="https://www.npmjs.com/search?q=%40sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">npm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/SAP/cloud-sdk-js" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/SAP-samples/cloud-sdk-js" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/support">Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Additional Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://community.sap.com/topics/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Cloud SDK Community Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://answers.sap.com/tags/73555000100800000895" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Cloud SDK on SAP Answers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://help.sap.com/viewer/product/SAP_CLOUD_SDK/1.0/en-US?task=discover_task" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Cloud SDK on SAP Help<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://sapinsights.eu.qualtrics.com/jfe/form/SV_0P69X6kJ0Pdxqbc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 SAP SE or an SAP affiliate company. All rights reserved.</div></div></div></footer></div>
</body>
</html>