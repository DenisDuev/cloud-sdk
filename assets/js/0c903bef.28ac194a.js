"use strict";(self.webpackChunksap_cloud_sdk_documentation=self.webpackChunksap_cloud_sdk_documentation||[]).push([[67777],{26253:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"guides/browser","title":"Use the SAP Cloud SDK in the Browser","description":"You\'ll learn how to package SDK for a browser, what are the limitations, and how to use it with popular frontend frameworks.","source":"@site/docs-js_versioned_docs/version-v1/guides/sdk-in-browser.mdx","sourceDirName":"guides","slug":"/guides/browser","permalink":"/cloud-sdk/docs/js/v1/guides/browser","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/cloud-sdk/edit/main/docs-js_versioned_docs/version-v1/guides/sdk-in-browser.mdx","tags":[],"version":"v1","frontMatter":{"id":"browser","title":"Use the SAP Cloud SDK in the Browser","sidebar_label":"Use the SAP Cloud SDK in the Browser","description":"You\'ll learn how to package SDK for a browser, what are the limitations, and how to use it with popular frontend frameworks.","keywords":["sap","cloud","sdk","cloud native","cloud sdk","sap cloud sdk"]},"sidebar":"docsJsSidebar","previous":{"title":"Connecting to External Systems from BAS","permalink":"/cloud-sdk/docs/js/v1/guides/bas"},"next":{"title":"Trust and Keystores","permalink":"/cloud-sdk/docs/js/v1/guides/trust-and-keystores"}}');var r=s(74848),t=s(28453);const i={id:"browser",title:"Use the SAP Cloud SDK in the Browser",sidebar_label:"Use the SAP Cloud SDK in the Browser",description:"You'll learn how to package SDK for a browser, what are the limitations, and how to use it with popular frontend frameworks.",keywords:["sap","cloud","sdk","cloud native","cloud sdk","sap cloud sdk"]},d=void 0,a={},l=[{value:"Prerequisite",id:"prerequisite",level:2},{value:"Include the SAP Cloud SDK",id:"include-the-sap-cloud-sdk",level:2},{value:"Run Locally",id:"run-locally",level:2},{value:"Run on SAP BTP, Cloud Foundry Environment",id:"run-on-sap-btp-cloud-foundry-environment",level:2},{value:"Workaround",id:"workaround",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The SAP Cloud SDK for JavaScript can be used both as a backend and frontend library when used in a browser.\nBecause of the specifics of a browser environment, some features might be unavailable.\nTo help you get up and running faster in a browser, we'll outline the main steps and caveats of using SAP Cloud SDK on the frontend.\nWe will use ",(0,r.jsx)(n.code,{children:"Angular"})," to illustrate the usage."]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisite",children:"Prerequisite"}),"\n",(0,r.jsxs)(n.p,{children:["You have a frontend application set up.\nFor example an ",(0,r.jsx)(n.a,{href:"https://angular.io/cli/new",children:"Angular application"})," via ",(0,r.jsx)(n.code,{children:"ng new myProject"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"include-the-sap-cloud-sdk",children:"Include the SAP Cloud SDK"}),"\n",(0,r.jsxs)(n.p,{children:["For most examples, we will use the business partner API.\nAdd the package ",(0,r.jsx)(n.code,{children:"@sap/cloud-sdk-vdm-business-partner-service"})," to your package.json and introduce some calls via:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"//In the .html part of the component\n<button (click)=\"callApi()\">Click me!</button>\n\n//In the .ts part of the component\nimport { BusinessPartner } from '@sap/cloud-sdk-vdm-business-partner-service'\n\nasync function callApi(){\n  const result = await BusinessPartner.requestBuilder().getAll().execute(myDest)\n  console.log(result)\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["For the destination lookup, the SAP Cloud SDK relies on ",(0,r.jsx)(n.code,{children:"Node.js"})," functionality like ",(0,r.jsx)(n.code,{children:"process.env"})," for example.\nHowever, the request building, execution, and result parsing do not require any ",(0,r.jsx)(n.code,{children:"Node.js"})," modules and can be used on the frontend.\nHence, you have to create the destination variable ",(0,r.jsx)(n.code,{children:"myDest"})," manually."]})}),"\n",(0,r.jsxs)(n.p,{children:["When you run ",(0,r.jsx)(n.code,{children:"npm run build"})," your project should compile.\nCurrently, we are facing compilation errors of the kind ",(0,r.jsx)(n.code,{children:"Module not found: Error: Can't resolve 'https' in ...'"}),"\nPlease check out the ",(0,r.jsx)(n.a,{href:"#workaround",children:"workaround"})," for these kinds of errors."]}),"\n",(0,r.jsx)(n.h2,{id:"run-locally",children:"Run Locally"}),"\n",(0,r.jsxs)(n.p,{children:["As discussed above the ",(0,r.jsx)(n.code,{children:"myDest"})," can not be fetched via the destination service.\nWhen you run locally you can simply provide it."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { Destination } from '@sap-cloud-sdk/core';\n\nconst myDest: Destination = {\n  url: 'https://my123456.s4hana.ondemand.com',\n  username: 'myUser',\n  password: 'myPassowrd'\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When you execute ",(0,r.jsx)(n.code,{children:"npm run serve"})," your project is compiled and hosted on a local server."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["When you trigger a request from a browser to the remote system all modern browsers will block this to ensure ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Same-origin_policy",children:"same origin policy"}),".\nOne simple way to overcome this issue locally is to disable the web security of your browser temporarily (e.g. --disable-web-security for Chrome).\nAlternatively, you can also create a second localhost proxy server that adds the ",(0,r.jsx)(n.code,{children:"access-allow-origin-header"})," to the request."]})}),"\n",(0,r.jsx)(n.h2,{id:"run-on-sap-btp-cloud-foundry-environment",children:"Run on SAP BTP, Cloud Foundry Environment"}),"\n",(0,r.jsxs)(n.p,{children:["For productive usage, the methods mentioned above for running locally are of course not needed.\nYou configure the ",(0,r.jsx)(n.code,{children:"xs-app.json"})," of the used app-router with an entry like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "source": "/REMOTE-SYSTEM-IDENTIFIER/(.*)",\n  "target": "/$1",\n  "destination": "DESTINATION-NAME-ON-CF"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"and then in your application define the destination as:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { Destination } from '@sap-cloud-sdk/core';\n\nconst myDest: Destination = {\n  url: '/REMOTE-SYSTEM-IDENTIFIER'\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The created request to ",(0,r.jsx)(n.code,{children:"/REMOTE-SYSTEM-IDENTIFIER/sap/opu/odata/sap/API_BUSINESS_PARTNER/A_BusinessPartner"})," will be matched by the app-router and the destination with the given URL and credentials is used."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["This approach does not support principal propagation to On-premise systems.\nFor this, you need a JWT and need to include the proper header fields defining the user.\nSee the documentation on ",(0,r.jsx)(n.a,{href:"../features/connectivity/on-premise",children:"On-premise systems"})," for details."]})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["With webpack it is possible to ",(0,r.jsx)(n.a,{href:"https://webpack.js.org/plugins/normal-module-replacement-plugin/",children:"load resources"})," for local or productive usage.\nUsing such a switch you can adjust the value of the destination for the two cases."]})}),"\n",(0,r.jsx)(n.h2,{id:"workaround",children:"Workaround"}),"\n",(0,r.jsxs)(n.p,{children:["Currently, we are facing the issue, that during the compilation from TS to JS the ",(0,r.jsx)(n.code,{children:"Node.js"})," parts cause problems even if they are not used.\nWe hope to resolve these issues in the future but for now, here is a workaround:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Include ",(0,r.jsx)(n.code,{children:"@angular-builders/custom-webpack"})," in the ",(0,r.jsx)(n.code,{children:"devDependencies"})]}),"\n",(0,r.jsxs)(n.li,{children:["Create a custom webpack configuration named ",(0,r.jsx)(n.code,{children:"node-webpack.config.js"})," and list the following node modules:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  node: {\n    crypto: true,\n    stream: true,\n    zlib: true,\n    path: true,\n    os: true,\n    http: true,\n    https: true\n  }\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.code,{children:"angular.json"})," adjust the ",(0,r.jsx)(n.code,{children:"build"})," target to use the custom builder:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:' "build": {\n   "builder": "@angular-builders/custom-webpack:browser",\n   "options": {\n     "customWebpackConfig": {\n       "path": "./node-webpack.config.js"\n     }\n  ...\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.code,{children:"angular.json"})," adjust the ",(0,r.jsx)(n.code,{children:"serve"})," target to use the custom builder as well:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:' "serve": {\n   "builder": "@angular-builders/custom-webpack:dev-server",\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.code,{children:"package.json"})," exclude the node modules, that do not exist in the browser:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"browser": {\n  "fs": false,\n  "net": false,\n  "tls": false\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Now the project should build and run locally."})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var o=s(96540);const r={},t=o.createContext(r);function i(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);